<!-- $Id: perso_module/arbre_hi_tools.txt v7.00 28/03/2017 20:02:08 Arbre ascendant (vertical) -->

%let;zzz;t=T;t1=CT;%in;

%define;rebuild_url(vvv,hhh,iii,xxx,sss,mmm)
  %let;nv0;%apply;min%with;%if;(evar.cpl = "on")13%else;12%end;%and;vvv%end;%in;
  %let;nv;%if;(nv0<5)5%else;%nv0;%end;%in;
  %let;new_url;%nn;
    %prefix;%access;;t=T;t1=CT;fs=9;wi=980;he=600;%nn;
    %if;(evar.m!="")m=%evar.m;;%end;%nn;
    %if;("vvv"!="")v=%nv;;%end;%nn;
    %if;("hhh"="I")hi=I;%else;hi=H;%end;%nn;
    %if;(iii=1)image=on;%end;%nn;
    %if;(xxx=1)implx=on;%end;%nn;
    %if;(sss=1)sosa=on;%end;%nn;
    %if;(mmm=1)cpl=on;%end;%nn;
  %in;
  %new_url;
%end;
%let;evarv;%if;(evar.v!="")%evar.v;%else;5%end;%in;
%let;evart;%if;(evar.t!="")%evar.t;%else;T%end;%in;
%let;evart1;%if;(evar.t1!="")%evar.t1;%end;%in;
%let;evarih;%if;(evar.hi!="")%evar.hi;%else;H%end;%in;
%let;evarim;%if;(evar.image!="" and evar.image="on")1%else;0%end;%in;
%let;evarix;%if;(evar.implx!="" and evar.implx="on")1%else;0%end;%in;
%let;evarso;%if;(evar.sosa!="" and evar.sosa="on")1%else;0%end;%in;
%let;evarma;%if;(evar.cpl!="" and evar.cpl="on")1%else;0%end;%in;
%let;maxlev;%apply;min%with;%nn;
  %if;(bvar.max_anc_tree!="")%bvar.max_anc_tree;%else;120%end;%and;%nn;
  %if;(bvar.max_anc_level!="")%bvar.max_anc_level;%else;120%end;%and;%nn;
  %expr(static_max_anc_level)%end;%nn;
%in;

%(evarv;, %evarih;, %evarim;, %evarso;, %evarma;<br>%)
%(minv %minv; < evarv %evarv; < maxv %maxv; (maxlev %maxlev;)%)
<div class="d-flex justify-content-between">
  %if;not cancel_links;
    <div class="form-inline">
      <div class="btn-group mx-2 mb-2">
        %if;(maxlev>9 and evarv>=5)
          <a href="%apply;rebuild_url%with;%expr(evarv-5)%and;%evarih;%and;%nn;
            %evarim;%and;%evarix;%and;%evarso;%and;%evarma;%end;"
            class="btn btn-secondary btn-sm font-weight-bold"
            title="(−5) [visualize/show/hide/summary]1 %expr(evarv-5) [generation/generations]0">−⁵</a>
          <a href="%apply;rebuild_url%with;%expr(evarv-1)%and;%evarih;%and;%nn;
            %evarim;;%and;%evarix;%and;%evarso;%and;%evarma;%end;"
            class="btn btn-secondary btn-sm small"
            title="(−1) [visualize/show/hide/summary]1 %expr(evarv-1) [generation/generations]0">−</a>
        %end;
        <span class="btn btn-outline-secondary btn-sm font-weight-bold">%evarv;</span>
        %if;(maxlev>9 and maxlev-evarv>=5)
          <a href="%apply;rebuild_url%with;%expr(evarv+1)%and;%evarih;%and;%nn;
            %evarim;;%and;%evarix;%and;%evarso;%and;%evarma;%end;"
            class="btn btn-secondary btn-sm small"
            title="(+1) [visualize/show/hide/summary]1 %expr(evarv+1) [generation/generations]1 (max %maxlev;)">+</a>
          <a href="%apply;rebuild_url%with;%expr(evarv+5)%and;%evarih;%and;%nn;
            %evarim;;%and;%evarix;%and;%evarso;%and;%evarma;%end;"
            class="btn btn-secondary btn-sm font-weight-bold"
            title="(+5) [visualize/show/hide/summary]1 %expr(evarv+5) [generation/generations]1 (max %maxlev;)">+⁵</a>
        %end;
      </div>
      <div class="btn-group mx-1 mb-2">
        <a href='%apply;rebuild_url(evarv,"H",evarim,evarix,evarso,evarma)'
          class="btn btn-outline-secondary btn-sm %if;(evarih="H")disabled font-weight-bold%end;"
          title="[*mode H/mode I]0">H</a>
        <a href='%apply;rebuild_url(evarv,"I",evarim,evarix,evarso,evarma)'
          class="btn btn-outline-secondary btn-sm %if;(evarih="I")disabled font-weight-bold%end;"
          title="[*mode H/mode I]1">I</a>
      </div>
      <div class="btn-group mx-1 mb-2">
      %(if;(evarim=1)
        <a href="%apply;rebuild_url(evarv,evarih,0,evarix,evarso,evarma)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]2 [image/images]0">
          <i class="fa fa-photo fa-fw"></i> <i class="fa fa-toggle-on text-muted"></i></a>
      %else;
        <a href="%apply;rebuild_url(evarv,evarih,1,evarix,evarso,evarma)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]1 [image/images]0">
          <i class="fa fa-photo fa-fw"></i> <i class="fa fa-toggle-off text-muted"></i></a>
      %end;%)
      </div>
      <div class="btn-group mx-1 mb-2">
      %if;(evarso=1)
        <a href="%apply;rebuild_url(evarv,evarih,evarim,evarix,0,evarma)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]2 [sosa]0">
          S <i class="fa fa-toggle-on text-muted"></i></a>
      %else;
        <a href="%apply;rebuild_url(evarv,evarih,evarim,evarix,1,evarma)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]1 [sosa]0">
          S <i class="fa fa-toggle-off text-muted"></i></a>
      %end;
      </div>
      <div class="btn-group mx-1 mb-2">
      %if;(evarma=1)
        <a href="%apply;rebuild_url(evarv,evarih,evarim,evarix,evarso,0)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]2 [couples]">
          <span class="fa fa-user-plus" aria-hidden="true"></span>%nn;
          <span class="fa fa-user" aria-hidden="true"></span>
          <i class="fa fa-toggle-on text-muted%(success ?%)"></i></a>
      %else;
        <a href="%apply;rebuild_url(evarv,evarih,evarim,evarix,evarso,1)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]1 [couples]">
          <span class="fa fa-user-plus" aria-hidden="true"></span>%nn;
          <span class="fa fa-user" aria-hidden="true"></span>
          <i class="fa fa-toggle-off text-muted"></i></a>
      %end;
      </div>
      <div class="btn-group mx-1 mb-2">
      %if;(evarix=1)
        <a href="%apply;rebuild_url(evarv,evarih,evarim,0,evarso,evarma)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]2 [implex]">
          <i class="fa fa-random fa-fw"></i> <i class="fa fa-toggle-on text-muted%(success ?%)"></i></a>
      %else;
        <a href="%apply;rebuild_url(evarv,evarih,evarim,1,evarso,evarma)"
          class="btn btn-outline-secondary btn-sm"
          title="[*visualize/show/hide/summary]1 [implex]">
          <i class="fa fa-random fa-fw"></i> <i class="fa fa-toggle-off text-muted"></i></a>
      %end;
      </div>
    </div>
  %end;
</div>
